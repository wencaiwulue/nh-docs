<!doctype html>
<html lang="en" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.1">
<link rel="alternate" type="application/rss+xml" href="/nh-docs/blog/rss.xml" title="Nocalhost Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/nh-docs/blog/atom.xml" title="Nocalhost Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="Nocalhost" href="/nh-docs/opensearch.xml">
<link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons"><title data-react-helmet="true">Architecture and Core Concepts | Nocalhost</title><meta data-react-helmet="true" property="og:url" content="https://neaped.github.io/nh-docs/docs/concepts/architecture"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="Architecture and Core Concepts | Nocalhost"><meta data-react-helmet="true" name="description" content="In this documentation, we will explain the core idea of Nocalhost and clarify some technical terms that are widely used in the project."><meta data-react-helmet="true" property="og:description" content="In this documentation, we will explain the core idea of Nocalhost and clarify some technical terms that are widely used in the project."><link data-react-helmet="true" rel="shortcut icon" href="/nh-docs/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://neaped.github.io/nh-docs/docs/concepts/architecture"><link data-react-helmet="true" rel="alternate" href="https://neaped.github.io/nh-docs/docs/concepts/architecture" hreflang="en"><link data-react-helmet="true" rel="alternate" href="https://neaped.github.io/nh-docs/docs/concepts/architecture" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/nh-docs/assets/css/styles.0e8ea317.css">
<link rel="preload" href="/nh-docs/assets/js/runtime~main.26cc8052.js" as="script">
<link rel="preload" href="/nh-docs/assets/js/main.96434f09.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#main" class="skipToContent_1oUP shadow--md">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/nh-docs/"><img src="/nh-docs/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/nh-docs/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nocalhost</b></a><a class="navbar__item navbar__link" href="/nh-docs/docs/quick-start">Docs</a><a class="navbar__item navbar__link" href="/nh-docs/videos">Videos</a><a class="navbar__item navbar__link" href="/nh-docs/blog">Blog</a></div><div class="navbar__items navbar__items--right"><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a class="navbar__item navbar__link" href="/nh-docs/docs/introduction">Next</a><ul class="dropdown__menu"><li><a aria-current="page" class="dropdown__link dropdown__link--active" href="/nh-docs/docs/concepts/architecture">Next</a></li><li><a class="dropdown__link" href="/nh-docs/versions">All Versions</a></li></ul></div><div class="navbar__item dropdown dropdown--hoverable dropdown--right"><a href="#" class="navbar__item navbar__link"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>en</span></span></a><ul class="dropdown__menu"><li><a href="/nh-docs/docs/concepts/architecture" target="_self" rel="noopener noreferrer" class="dropdown__link dropdown__link--active" style="text-transform:capitalize">en</a></li></ul></div><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link"></a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ðŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ðŸŒž</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_xXbB"><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span><span class="DocSearch-Button-Keys"></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/nh-docs/"><img src="/nh-docs/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/nh-docs/img/logo.png" alt="Most productive cloud-native development toolsets" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Nocalhost</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/nh-docs/docs/quick-start">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/nh-docs/videos">Videos</a></li><li class="menu__list-item"><a class="menu__link" href="/nh-docs/blog">Blog</a></li><li class="menu__list-item"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active" href="/nh-docs/docs/concepts/architecture">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/nh-docs/versions">All Versions</a></li></ul></li><li class="menu__list-item menu__list-item--collapsed"><a href="#" role="button" class="menu__link menu__link--sublist"><span><svg viewBox="0 0 20 20" width="20" height="20" aria-hidden="true" style="vertical-align:text-bottom;margin-right:5px"><path fill="currentColor" d="M19.753 10.909c-.624-1.707-2.366-2.726-4.661-2.726-.09 0-.176.002-.262.006l-.016-2.063 3.525-.607c.115-.019.133-.119.109-.231-.023-.111-.167-.883-.188-.976-.027-.131-.102-.127-.207-.109-.104.018-3.25.461-3.25.461l-.013-2.078c-.001-.125-.069-.158-.194-.156l-1.025.016c-.105.002-.164.049-.162.148l.033 2.307s-3.061.527-3.144.543c-.084.014-.17.053-.151.143.019.09.19 1.094.208 1.172.018.08.072.129.188.107l2.924-.504.035 2.018c-1.077.281-1.801.824-2.256 1.303-.768.807-1.207 1.887-1.207 2.963 0 1.586.971 2.529 2.328 2.695 3.162.387 5.119-3.06 5.769-4.715 1.097 1.506.256 4.354-2.094 5.98-.043.029-.098.129-.033.207l.619.756c.08.096.206.059.256.023 2.51-1.73 3.661-4.515 2.869-6.683zm-7.386 3.188c-.966-.121-.944-.914-.944-1.453 0-.773.327-1.58.876-2.156a3.21 3.21 0 011.229-.799l.082 4.277a2.773 2.773 0 01-1.243.131zm2.427-.553l.046-4.109c.084-.004.166-.01.252-.01.773 0 1.494.145 1.885.361.391.217-1.023 2.713-2.183 3.758zm-8.95-7.668a.196.196 0 00-.196-.145h-1.95a.194.194 0 00-.194.144L.008 16.916c-.017.051-.011.076.062.076h1.733c.075 0 .099-.023.114-.072l1.008-3.318h3.496l1.008 3.318c.016.049.039.072.113.072h1.734c.072 0 .078-.025.062-.076-.014-.05-3.083-9.741-3.494-11.04zm-2.618 6.318l1.447-5.25 1.447 5.25H3.226z"></path></svg><span>Languages</span></span></a><ul class="menu__list"><li class="menu__list-item"><a href="/nh-docs/docs/concepts/architecture" target="_self" rel="noopener noreferrer" class="menu__link dropdown__link--active" style="text-transform:capitalize">en</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/nocalhost/nocalhost" target="_blank" rel="noopener noreferrer" class="menu__link header-github-link"></a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><main class="docMainContainer_3ufF docMainContainerEnhanced_3NYZ"><div class="container padding-top--md padding-bottom--lg docItemWrapper_3FMP"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">Architecture and Core Concepts</h1></header><p>In this documentation, we will explain the core idea of Nocalhost and clarify some technical terms that are widely used in the project.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="architecture"></a>Architecture<a class="hash-link" href="#architecture" title="Direct link to heading">#</a></h2><p>The overall working diagram of Nocalhost is as follows:</p><figure><img src="/nh-docs/img/intro/nh-architecture.jpeg"></figure><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ide-plugins"></a>IDE Plugins<a class="hash-link" href="#ide-plugins" title="Direct link to heading">#</a></h3><p>IDE plugin packs the capabilities of nhctl and nocalhost-api development environment management to provide users with a better experience.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nhctl"></a>nhctl<a class="hash-link" href="#nhctl" title="Direct link to heading">#</a></h3><p>nhctl is the core component of nocalhost, here are the core features:</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="deployuninstall-applications"></a>Deploy/Uninstall Applications<a class="hash-link" href="#deployuninstall-applications" title="Direct link to heading">#</a></h4><p>Nocalhost can deploy applications to Kubernetes cluster or uninstall application from DevSpace.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hot-reloading-via-file-sync"></a>Hot Reloading Via File Sync<a class="hash-link" href="#hot-reloading-via-file-sync" title="Direct link to heading">#</a></h4><p>Any changes made to the local source codes will be synchronized to the remote DevContainer automatically. Developer can recompile and restart their process to verify code changes. In the future, we will support configure hotreload commands instead of restart processes manually. </p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nocalhost-web"></a>nocalhost-web<a class="hash-link" href="#nocalhost-web" title="Direct link to heading">#</a></h3><p>nocalhost-web provides a web dashboard to manage users, development kubernetes clusters, applications and DevSpaces.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nocalhost-api"></a>nocalhost-api<a class="hash-link" href="#nocalhost-api" title="Direct link to heading">#</a></h3><p>Nocalhost manages serviceAccount, namespace and application in kubernetes cluster through api-server, and persists to database, providing data support for IDE plugin usage.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="nocalhost-dep"></a>nocalhost-dep<a class="hash-link" href="#nocalhost-dep" title="Direct link to heading">#</a></h3><ul><li><p>When application microservices are deployed in a Kubernetes cluster, there is no way to controler the startup sequence and dependencies of these microservices. A typical scenario is: Service A and Service B both rely on Mysql, Redis, RabbitMQ. Service A and Service B cannot be started unless these dependent services are available. </p></li><li><p>Usually developers have to wait the Pod&#x27;s restarting rely on Kubernetes&#x27; HealthCheck Probe. After restarting again and again, the time interval will be very long. This is why many large system running in Kubernetes start up extremely slow.</p></li><li><p>By implemented a Kubernetes Admission Webhook like Istio injecting Sidecar, nocalhost-dep can controls the starting order. </p></li><li><p>When applications deployed, nocalhost-dep will inject InitContainers into the workload automatically. According to declared dependencies, nocalhost-dep keeps waiting for the dependent services&#x27;s availability. </p></li><li><p>Once all dependent service become available, the InitContainer exits, then the containers which container business logics start. There is no restarting, which means minimal time waiting of starting.</p></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="core-concepts"></a>Core Concepts<a class="hash-link" href="#core-concepts" title="Direct link to heading">#</a></h2><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="devmode"></a>DevMode<a class="hash-link" href="#devmode" title="Direct link to heading">#</a></h3><p><strong>DevMode</strong> refers to a <strong>state</strong> corresponding to the microservice workload when the developer uses Nocalhost for microservice development. In this state, the workload will be converted into a mode that can easily support developers to develop debugging programs.</p><p>In the existing Nocalhost development environment that based on Kubernetes, the main changes in DevMode are as follows:</p><ul><li>The number of copies of the workload will be adjusted to 1</li><li>The Pod&#x27;s health check will be disabled (it is convenient to keep trying to restart the process for debugging during the development)</li><li>Pod container will be replaced with <a href="#devcontainer">DevContainer</a></li><li>SecurityContext will be disabled</li><li>A Nocalhost-Sidecar container will be injected into Pod, in order to support remote file synchronization </li><li>Pod will be added with a Volume to support file sharing between DevContainer and Nocalhost-Sidecar</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="devcontainer"></a>DevContainer<a class="hash-link" href="#devcontainer" title="Direct link to heading">#</a></h3><p><strong>DevContainer</strong> is a basic environment for users to support the development and debugging of a specify microservice component. This environment is packaged into a container, which often contains a full set of SDKs , development and debugging tools, and other tools for developing this microservice component. When the service workload is switched to <a href="#devmode">DevMode</a>, Nocalhost will use <strong>DevContainer</strong> to replace the original workload container.</p><p><strong>DevContainer&#x27;s</strong> life cycle runs through the entire development and debugging process, it created when DevMode starts. During the life cycle, local source code changes will be automatically synchronized to <strong>DevContainer</strong>, and can be directly compiled and deployed in the container.</p><h4><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="devcontainer-configuration"></a>DevContainer Configuration<a class="hash-link" href="#devcontainer-configuration" title="Direct link to heading">#</a></h4><p>Read <a href="/nh-docs/docs/guides/devcontainer-config">Configure DevContainer</a>ã€‚</p></div><footer class="row docusaurus-mt-lg"><div class="col"><a href="https://github.com/neaped/nocal-docs-docusaurus/tree/dev/docs/concepts/architecture.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_2_ui" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_3DPF">Last updated on <b><time datetime="2021-07-28T04:45:11.000Z">7/28/2021</time></b> by <b>Garry</b></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#architecture" class="table-of-contents__link">Architecture</a><ul><li><a href="#ide-plugins" class="table-of-contents__link">IDE Plugins</a></li><li><a href="#nhctl" class="table-of-contents__link">nhctl</a></li><li><a href="#nocalhost-web" class="table-of-contents__link">nocalhost-web</a></li><li><a href="#nocalhost-api" class="table-of-contents__link">nocalhost-api</a></li><li><a href="#nocalhost-dep" class="table-of-contents__link">nocalhost-dep</a></li></ul></li><li><a href="#core-concepts" class="table-of-contents__link">Core Concepts</a><ul><li><a href="#devmode" class="table-of-contents__link">DevMode</a></li><li><a href="#devcontainer" class="table-of-contents__link">DevContainer</a></li></ul></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/nh-docs/docs/quick-start">Getting Started</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/nh-docs/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/facebook/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2021 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/nh-docs/assets/js/runtime~main.26cc8052.js"></script>
<script src="/nh-docs/assets/js/main.96434f09.js"></script>
</body>
</html>