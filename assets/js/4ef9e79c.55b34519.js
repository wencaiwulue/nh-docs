"use strict";(self.webpackChunknh_docs=self.webpackChunknh_docs||[]).push([[18],{3905:function(e,n,t){t.d(n,{Zo:function(){return u},kt:function(){return f}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function i(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function a(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?i(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):i(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function c(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},i=Object.keys(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(r=0;r<i.length;r++)t=i[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),d=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):a(a({},n),e)),t},u=function(e){var n=d(e.components);return r.createElement(l.Provider,{value:n},e.children)},s={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,i=e.originalType,l=e.parentName,u=c(e,["components","mdxType","originalType","parentName"]),p=d(t),f=o,g=p["".concat(l,".").concat(f)]||p[f]||s[f]||i;return t?r.createElement(g,a(a({ref:n},u),{},{components:t})):r.createElement(g,a({ref:n},u))}));function f(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var i=t.length,a=new Array(i);a[0]=p;var c={};for(var l in n)hasOwnProperty.call(n,l)&&(c[l]=n[l]);c.originalType=e,c.mdxType="string"==typeof e?e:o,a[1]=c;for(var d=2;d<i;d++)a[d]=t[d];return r.createElement.apply(null,a)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},3919:function(e,n,t){function r(e){return!0===/^(\w*:|\/\/)/.test(e)}function o(e){return void 0!==e&&!r(e)}t.d(n,{b:function(){return r},Z:function(){return o}})},4996:function(e,n,t){t.d(n,{C:function(){return i},Z:function(){return a}});var r=t(2263),o=t(3919);function i(){var e=(0,r.Z)().siteConfig,n=(e=void 0===e?{}:e).baseUrl,t=void 0===n?"/":n,i=e.url;return{withBaseUrl:function(e,n){return function(e,n,t,r){var i=void 0===r?{}:r,a=i.forcePrependBaseUrl,c=void 0!==a&&a,l=i.absolute,d=void 0!==l&&l;if(!t)return t;if(t.startsWith("#"))return t;if((0,o.b)(t))return t;if(c)return n+t;var u=t.startsWith(n)?t:n+t.replace(/^\//,"");return d?e+u:u}(i,t,e,n)}}}function a(e,n){return void 0===n&&(n={}),(0,i().withBaseUrl)(e,n)}},1298:function(e,n,t){t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return d},metadata:function(){return u},toc:function(){return s},default:function(){return f}});var r=t(2122),o=t(9756),i=(t(7294),t(3905)),a=t(4996),c=["components"],l={},d="Configure DevContainer",u={unversionedId:"guides/devcontainer-config",id:"guides/devcontainer-config",isDocsHomePage:!1,title:"Configure DevContainer",description:"When Nocalhost controls the Kubernetes POD to enter DevMode, the configured DevContainer Image will be started as DevContainer instead of the original container. After that, developers can build, run, and debug their own programs in DevContainer.",source:"@site/docs/guides/devcontainer-config.md",sourceDirName:"guides",slug:"/guides/devcontainer-config",permalink:"/nh-docs/docs/guides/devcontainer-config",editUrl:"https://github.com/neaped/nh-docs/docs/guides/devcontainer-config.md",version:"current",lastUpdatedBy:"Garry",lastUpdatedAt:1627972766,formattedLastUpdatedAt:"8/3/2021",frontMatter:{},sidebar:"docs",previous:{title:"Configure Services",permalink:"/nh-docs/docs/guides/service-config"},next:{title:"Config Reference",permalink:"/nh-docs/docs/config/config-ref"}},s=[{value:"Advices for Making DevContainer",id:"advices-for-making-devcontainer",children:[]},{value:"Nocalhost&#39;s DevContainer Image",id:"nocalhosts-devcontainer-image",children:[]},{value:"How to Configure DevContainer",id:"how-to-configure-devcontainer",children:[]}],p={toc:s};function f(e){var n=e.components,t=(0,o.Z)(e,c);return(0,i.kt)("wrapper",(0,r.Z)({},p,t,{components:n,mdxType:"MDXLayout"}),(0,i.kt)("h1",{id:"configure-devcontainer"},"Configure DevContainer"),(0,i.kt)("p",null,"When Nocalhost controls the Kubernetes POD to enter ",(0,i.kt)("inlineCode",{parentName:"p"},"DevMode"),", the configured ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer Image")," will be started as ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer")," instead of the original container. After that, developers can build, run, and debug their own programs in ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer"),"."),(0,i.kt)("p",null,"You can use the ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer Image")," provided by us or customize it yourself."),(0,i.kt)("h2",{id:"advices-for-making-devcontainer"},"Advices for Making DevContainer"),(0,i.kt)("p",null,"You can use any Docker image to make ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer Image"),", as long as it containers the basic ",(0,i.kt)("inlineCode",{parentName:"p"},"shell (/bin/sh)"),"."),(0,i.kt)("p",null,"However, it is strongly recommended to provide a dedicated ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer Image")," for the services of a specific technology stack. A good ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer")," image should:"),(0,i.kt)("ul",null,(0,i.kt)("li",{parentName:"ul"},"Provide easy-to-use shells, such as: bash, zsh, etc."),(0,i.kt)("li",{parentName:"ul"},"Provide the basic SDK needed to build source code, such as JDK"),(0,i.kt)("li",{parentName:"ul"},"Provide tool chains needed to build source code, such as git, maven, yarn, make, etc."),(0,i.kt)("li",{parentName:"ul"},"Provide third-party dependency packages or automatic download configuration required to build source code, such as Maven mirror source"),(0,i.kt)("li",{parentName:"ul"},"Provide other debugging tools needed in the development process, such as gdb, curl, tcpdump, mysql-client, etc."),(0,i.kt)("li",{parentName:"ul"},"Do not include the source code of the service (the source code should be checked out locally through the source code management system and synchronized to the DevContainer.)")),(0,i.kt)("h2",{id:"nocalhosts-devcontainer-image"},"Nocalhost's DevContainer Image"),(0,i.kt)("p",null,"We provides some standard ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer Image"),", you can download from this ",(0,i.kt)("a",{parentName:"p",href:"https://github.com/nocalhost/dev-container"},"Github Repo"),"."),(0,i.kt)("h2",{id:"how-to-configure-devcontainer"},"How to Configure DevContainer"),(0,i.kt)("ol",null,(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Select a workload\uff0cclick ",(0,i.kt)("img",{src:(0,a.Z)("/img/icons/nocalhost-config-icon.jpg"),width:"20"})," to configure")),(0,i.kt)("li",{parentName:"ol"},(0,i.kt)("p",{parentName:"li"},"Change the  ",(0,i.kt)("inlineCode",{parentName:"p"},"image")," filed as following:"))),(0,i.kt)("pre",null,(0,i.kt)("code",{parentName:"pre",className:"language-yml",metastring:"{11}","{11}":!0},"containers:\n  - name: productpage\n    install:\n      env: []\n      envFrom:\n        envFile: []\n      portForward:\n        - 39080:9080\n    dev:\n      gitUrl: https://e.coding.net/codingcorp/nocalhost/bookinfo-productpage.git\n      image: codingcorp-docker.pkg.coding.net/nocalhost/dev-images/python:3.7.7-slim-productpage\n      shell: bash\n")),(0,i.kt)("p",null,"When debugging, Nocalhost will overwrite the startup command of ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer")," to ",(0,i.kt)("inlineCode",{parentName:"p"},"/bin/sh -c tail -f /dev/null")," to ensure that ",(0,i.kt)("inlineCode",{parentName:"p"},"DevContainer")," will not exit unexpectedly. For other changes made by Nocalhost under ",(0,i.kt)("strong",{parentName:"p"},"DevMode"),", please refer to ",(0,i.kt)("a",{parentName:"p",href:"#"},"DevMode"),"."))}f.isMDXComponent=!0}}]);